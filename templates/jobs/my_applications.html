{% extends 'base.html' %}

{% block title %}æˆ‘çš„ç”³è¯· - æ ¡å›­å…¼èŒå¹³å°{% endblock %}

{% block content %}
<div style="background-color: white; padding: 2rem; border-radius: 15px;">
    <h1 style="color: #667eea; margin-bottom: 2rem;">æˆ‘çš„ç”³è¯·</h1>

    {% if applications %}
        <div style="display: grid; gap: 1.5rem;">
            {% for application in applications %}
                <div class="application-card">
                    <div class="application-header">
                        <div>
                            <h3 style="margin: 0 0 0.5rem 0;">
                                <a href="{% url 'jobs:job_detail' application.job.pk %}" style="color: #333; text-decoration: none;">
                                    {{ application.job.title }}
                                </a>
                            </h3>
                            <div style="color: #666; font-size: 0.9rem;">
                                <span>ğŸ’° {{ application.job.salary }} å…ƒ</span>
                                <span style="margin-left: 1rem;">ğŸ“ {{ application.job.location }}</span>
                            </div>
                        </div>
                        <span class="status-badge status-{{ application.status }}">
                            {{ application.get_status_display }}
                        </span>
                    </div>

                    <div style="background-color: white; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                        <p style="color: #666; margin: 0;"><strong>ç”³è¯·ç•™è¨€ï¼š</strong></p>
                        <p style="margin: 0.5rem 0 0 0; line-height: 1.6;">{{ application.message }}</p>
                    </div>

                    <div style="display: flex; justify-content: space-between; align-items: center; color: #999; font-size: 0.9rem;">
                        <div>
                            <span>ç”³è¯·æ—¶é—´ï¼š{{ application.created_at|date:"Y-m-d H:i" }}</span>
                            {% if application.status == 'completed' and application.completed_at %}
                                <span style="margin-left: 1rem; color: #28a745;">âœ“ å®Œæˆæ—¶é—´ï¼š{{ application.completed_at|date:"Y-m-d H:i" }}</span>
                            {% endif %}
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            <a href="{% url 'jobs:job_detail' application.job.pk %}" class="btn btn-secondary btn-sm">æŸ¥çœ‹è¯¦æƒ…</a>
                            {% if application.status == 'pending' %}
                                <a href="{% url 'jobs:withdraw_application' application.pk %}"
                                   class="btn btn-secondary btn-sm"
                                   onclick="return confirm('ç¡®å®šè¦æ’¤å›ç”³è¯·å—ï¼Ÿ')">æ’¤å›ç”³è¯·</a>
                            {% elif application.status == 'accepted' %}
                                <a href="{% url 'jobs:complete_application' application.pk %}"
                                   class="btn btn-primary btn-sm"
                                   onclick="return confirm('ç¡®è®¤å·²å®Œæˆè¿™ä»½å…¼èŒå—ï¼Ÿ')">æ ‡è®°å®Œæˆ</a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div style="text-align: center; padding: 3rem; color: #999;">
            <p style="font-size: 1.2rem;">æ‚¨è¿˜æ²¡æœ‰ç”³è¯·ä»»ä½•å…¼èŒ</p>
            <a href="{% url 'jobs:job_list' %}" class="btn btn-primary" style="margin-top: 1rem;">æµè§ˆå…¼èŒ</a>
        </div>
    {% endif %}
</div>
{% endblock %}
